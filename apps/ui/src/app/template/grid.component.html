<p *ngIf="!jobTemplates">Loading</p>

<div *ngIf="error" class="alert alert-danger" role="alert">{{ error }}</div>

<div *ngIf="jobTemplates">
    <ul class="nav justify-content-end">
        <li class="nav-item">
            <a class="nav-link" routerLink="/job-templates/new" routerLinkActive="active">Create new</a>
        </li>
    </ul>

    <table class="table table-striped table-hover table-bordered">
        <thead class="thead-inverse">
        <tr>
            <th>Id:</th>
            <th>Name:</th>
            <th>Created at</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let jobTemplate of jobTemplates">
            <td>{{jobTemplate.templateId}}</td>
            <td>{{jobTemplate.name}}</td>
            <td>
                <time [attr.datetime]="jobTemplate.createdAt.unix" [attr.title]="jobTemplate.createdAt.iso">{{ (jobTemplate.createdAt.unix | amFromUnix) | amTimeAgo }}</time>
            </td>
            <td>
                <job-run-now [jobTemplate]="jobTemplate" (onRunFailed)="onRunFailed($event)"></job-run-now>
                <button type="button" class="btn btn-primary btn-sm" [routerLink]="['/job-template', jobTemplate.templateId ]">View</button>
            </td>
        </tr>
        </tbody>
    </table>
</div>