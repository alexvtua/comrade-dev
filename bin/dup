#!/usr/bin/env bash

docker-compose up --remove-orphans
trap "docker-compose stop jmw jmd ui; killall fswatch" SIGTERM  SIGINT

fswatch --latency=0.5 -o -L apps/jm | xargs -n1 -I{} docker-compose kill -s USR1 jmw &
fswatch --latency=0.5 -o -L apps/jm | xargs -n1 -I{} docker-compose kill -s USR1 jmd &

docker-compose logs --tail=10 -f jm jmw jmd ui
